# values.yaml for searxng via TrueCharts

# --- Global settings ---
global:
  # Use Longhorn storage class
  storageClass: nfs-client

# --- Service & Ingress ---
ingress:
  main:
    enabled: true
    primary: true
    className: nginx
    hosts:
      - searxng.hnatekmar.dev
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-cloudflare
    tls:
      - secretName: searxng-tls
        hosts:
          - searxng.hnatekmar.dev

# --- Persistence ---
persistence:
  enabled: true
  storageClass: nfs-client
  annotations:
    nfs.io/storage-path: "searxng"
  accessModes:
    - ReadWriteOnce
  size: 10Gi

# --- Security ---
securityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000
  readOnlyRootFilesystem: true

# --- Resources ---
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 200m
    memory: 256Mi

# --- Image settings ---
image:
  repository: searxng/searxng
  tag: latest
  pullPolicy: IfNotPresent

# --- Extra environment variables (optional) ---
env:
  - name: SEARXNG_DISABLE_PRIVATE_SEARCH
    value: "true"

# --- Optional: disable health checks if needed
livenessProbe:
  enabled: true
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5

readinessProbe:
  enabled: true
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5